---
  - hosts: nextcloud
    vars_files:
      - 'vars/vault.yml'
    roles:
      - role: grog.package
      - role: geerlingguy.ntp
      - role: geerlingguy.docker
        tags: docker, nextcloud
      - role: geerlingguy.pip
        tags: docker, nextcloud
      - role: nextcloud
        tags: nextcloud
      - role: caddy_ansible.caddy_ansible
        tags: caddy

  - hosts: docs
    vars_files:
      - 'vars/vault.yml'
    roles:
      - role: grog.package
      - role: geerlingguy.pip
      - role: caddy_ansible.caddy_ansible
        tags: caddy
      - role: docs
        tags: docs

  - hosts: authentik
    vars_files:
      - 'vars/vault.yml'
    roles:
      - role: grog.package
      - role: geerlingguy.ntp
      - role: geerlingguy.docker
        tags: docker, authentik
      - role: geerlingguy.pip
        tags: docker, authentik
      - role: authentik
        tags: authentik
      - role: caddy_ansible.caddy_ansible
        tags: caddy